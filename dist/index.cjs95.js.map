{"version":3,"file":"index.cjs95.js","sources":["../node_modules/axios/lib/helpers/toFormData.js"],"sourcesContent":["'use strict';\n\nimport utils from '../utils.js';\nimport AxiosError from '../core/AxiosError.js';\n// temporary hotfix to avoid circular references until AxiosURLSearchParams is refactored\nimport PlatformFormData from '../platform/node/classes/FormData.js';\n\n/**\n * Determines if the given thing is a array or js object.\n *\n * @param {string} thing - The object or array to be visited.\n *\n * @returns {boolean}\n */\nfunction isVisitable(thing) {\n  return utils.isPlainObject(thing) || utils.isArray(thing);\n}\n\n/**\n * It removes the brackets from the end of a string\n *\n * @param {string} key - The key of the parameter.\n *\n * @returns {string} the key without the brackets.\n */\nfunction removeBrackets(key) {\n  return utils.endsWith(key, '[]') ? key.slice(0, -2) : key;\n}\n\n/**\n * It takes a path, a key, and a boolean, and returns a string\n *\n * @param {string} path - The path to the current key.\n * @param {string} key - The key of the current object being iterated over.\n * @param {string} dots - If true, the key will be rendered with dots instead of brackets.\n *\n * @returns {string} The path to the current key.\n */\nfunction renderKey(path, key, dots) {\n  if (!path) return key;\n  return path.concat(key).map(function each(token, i) {\n    // eslint-disable-next-line no-param-reassign\n    token = removeBrackets(token);\n    return !dots && i ? '[' + token + ']' : token;\n  }).join(dots ? '.' : '');\n}\n\n/**\n * If the array is an array and none of its elements are visitable, then it's a flat array.\n *\n * @param {Array<any>} arr - The array to check\n *\n * @returns {boolean}\n */\nfunction isFlatArray(arr) {\n  return utils.isArray(arr) && !arr.some(isVisitable);\n}\n\nconst predicates = utils.toFlatObject(utils, {}, null, function filter(prop) {\n  return /^is[A-Z]/.test(prop);\n});\n\n/**\n * Convert a data object to FormData\n *\n * @param {Object} obj\n * @param {?Object} [formData]\n * @param {?Object} [options]\n * @param {Function} [options.visitor]\n * @param {Boolean} [options.metaTokens = true]\n * @param {Boolean} [options.dots = false]\n * @param {?Boolean} [options.indexes = false]\n *\n * @returns {Object}\n **/\n\n/**\n * It converts an object into a FormData object\n *\n * @param {Object<any, any>} obj - The object to convert to form data.\n * @param {string} formData - The FormData object to append to.\n * @param {Object<string, any>} options\n *\n * @returns\n */\nfunction toFormData(obj, formData, options) {\n  if (!utils.isObject(obj)) {\n    throw new TypeError('target must be an object');\n  }\n\n  // eslint-disable-next-line no-param-reassign\n  formData = formData || new (PlatformFormData || FormData)();\n\n  // eslint-disable-next-line no-param-reassign\n  options = utils.toFlatObject(options, {\n    metaTokens: true,\n    dots: false,\n    indexes: false\n  }, false, function defined(option, source) {\n    // eslint-disable-next-line no-eq-null,eqeqeq\n    return !utils.isUndefined(source[option]);\n  });\n\n  const metaTokens = options.metaTokens;\n  // eslint-disable-next-line no-use-before-define\n  const visitor = options.visitor || defaultVisitor;\n  const dots = options.dots;\n  const indexes = options.indexes;\n  const _Blob = options.Blob || typeof Blob !== 'undefined' && Blob;\n  const useBlob = _Blob && utils.isSpecCompliantForm(formData);\n\n  if (!utils.isFunction(visitor)) {\n    throw new TypeError('visitor must be a function');\n  }\n\n  function convertValue(value) {\n    if (value === null) return '';\n\n    if (utils.isDate(value)) {\n      return value.toISOString();\n    }\n\n    if (!useBlob && utils.isBlob(value)) {\n      throw new AxiosError('Blob is not supported. Use a Buffer instead.');\n    }\n\n    if (utils.isArrayBuffer(value) || utils.isTypedArray(value)) {\n      return useBlob && typeof Blob === 'function' ? new Blob([value]) : Buffer.from(value);\n    }\n\n    return value;\n  }\n\n  /**\n   * Default visitor.\n   *\n   * @param {*} value\n   * @param {String|Number} key\n   * @param {Array<String|Number>} path\n   * @this {FormData}\n   *\n   * @returns {boolean} return true to visit the each prop of the value recursively\n   */\n  function defaultVisitor(value, key, path) {\n    let arr = value;\n\n    if (value && !path && typeof value === 'object') {\n      if (utils.endsWith(key, '{}')) {\n        // eslint-disable-next-line no-param-reassign\n        key = metaTokens ? key : key.slice(0, -2);\n        // eslint-disable-next-line no-param-reassign\n        value = JSON.stringify(value);\n      } else if (\n        (utils.isArray(value) && isFlatArray(value)) ||\n        ((utils.isFileList(value) || utils.endsWith(key, '[]')) && (arr = utils.toArray(value))\n        )) {\n        // eslint-disable-next-line no-param-reassign\n        key = removeBrackets(key);\n\n        arr.forEach(function each(el, index) {\n          !(utils.isUndefined(el) || el === null) && formData.append(\n            // eslint-disable-next-line no-nested-ternary\n            indexes === true ? renderKey([key], index, dots) : (indexes === null ? key : key + '[]'),\n            convertValue(el)\n          );\n        });\n        return false;\n      }\n    }\n\n    if (isVisitable(value)) {\n      return true;\n    }\n\n    formData.append(renderKey(path, key, dots), convertValue(value));\n\n    return false;\n  }\n\n  const stack = [];\n\n  const exposedHelpers = Object.assign(predicates, {\n    defaultVisitor,\n    convertValue,\n    isVisitable\n  });\n\n  function build(value, path) {\n    if (utils.isUndefined(value)) return;\n\n    if (stack.indexOf(value) !== -1) {\n      throw Error('Circular reference detected in ' + path.join('.'));\n    }\n\n    stack.push(value);\n\n    utils.forEach(value, function each(el, key) {\n      const result = !(utils.isUndefined(el) || el === null) && visitor.call(\n        formData, el, utils.isString(key) ? key.trim() : key, path, exposedHelpers\n      );\n\n      if (result === true) {\n        build(el, path ? path.concat(key) : [key]);\n      }\n    });\n\n    stack.pop();\n  }\n\n  if (!utils.isObject(obj)) {\n    throw new TypeError('data must be an object');\n  }\n\n  build(obj);\n\n  return formData;\n}\n\nexport default toFormData;\n"],"names":["isVisitable","thing","utils","removeBrackets","key","renderKey","path","dots","token","i","isFlatArray","arr","predicates","prop","toFormData","obj","formData","options","option","source","metaTokens","visitor","defaultVisitor","indexes","useBlob","convertValue","value","AxiosError","el","index","stack","exposedHelpers","build"],"mappings":"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","x_google_ignoreList":[0]}