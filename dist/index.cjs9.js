"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const t=require("@apollo/client"),d=require("./index.cjs27.js"),p=require("./index.cjs28.js"),f=require("graphql"),h=require("graphql-ws"),a=require("./index.cjs29.js"),l=require("./index.cjs30.js"),P=i=>d.onError(({graphQLErrors:e,networkError:r})=>{e&&typeof window<"u"&&(e.forEach(({message:n,locations:c,path:u,extensions:o})=>{console.error(`[GraphQL error]: Message: ${n}, Location: ${c}, Path: ${u}`,o),o&&o.code==="invalid-jwt"&&(i?.["invalid-jwt"]?.(),setTimeout(()=>window.location.assign("/"),3e3))}),r&&console.log(`[Network error]: ${JSON.stringify(r)}`))}),s=(i,e)=>new t.HttpLink({uri:i,headers:e.authToken?{authorization:`Bearer ${e.authToken}`}:{"x-hasura-org-id":e.appId,"x-hasura-app-id":e.appId,"x-hasura-user-id":l.default(),"x-hasura-role":"anonymous"}}),_=(i,e)=>t.split(({query:r})=>{const n=a.getMainDefinition(r);return n.kind==="OperationDefinition"&&n.operation==="subscription"},new p.GraphQLWsLink(h.createClient({url:String(process.env.NEXT_PUBLIC_GRAPHQL_WS_ENDPOINT),connectionParams:{headers:e?{authorization:`Bearer ${e}`}:{"x-hasura-org-id":i,"x-hasura-app-id":i,"x-hasura-user-id":l.default(),"x-hasura-role":"anonymous"}}})),t.split(({query:r})=>{const n=a.getMainDefinition(r);return n.kind==="OperationDefinition"&&n.operation===f.OperationTypeNode.QUERY||!1},t.split(({query:r})=>{const n=a.getMainDefinition(r);return n.kind==="OperationDefinition"&&(n.name?.value.startsWith("Ph")||n.name?.value.startsWith("PH_"))||!1},s(process.env.NEXT_PUBLIC_GRAPHQL_PH_ENDPOINT,{authToken:e,appId:i}),s(process.env.NEXT_PUBLIC_GRAPHQL_RH_ENDPOINT,{authToken:e,appId:i})),s(process.env.NEXT_PUBLIC_GRAPHQL_PH_ENDPOINT,{authToken:e,appId:i}))),L=(i,e)=>new t.ApolloClient({link:t.from([P(e),_(i.appId,i.authToken)]),cache:new t.InMemoryCache});exports.createApolloClient=L;
//# sourceMappingURL=index.cjs9.js.map
