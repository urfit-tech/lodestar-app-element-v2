"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const b=require("./index.cjs99.js"),A=require("./index.cjs215.js"),C=require("./index.cjs147.js"),r=require("./index.cjs110.js"),L=require("./index.cjs105.js"),O=require("./index.cjs216.js"),D=require("./index.cjs149.js"),v=require("./index.cjs113.js"),x=require("./index.cjs217.js"),U=require("./index.cjs218.js"),M=typeof XMLHttpRequest<"u",_=M&&function(o){return new Promise(function(H,s){const t=U.default(o);let E=t.data;const T=v.default.from(t.headers).normalize();let{responseType:u,onUploadProgress:R,onDownloadProgress:m}=t,a,q,h,i,f;function g(){i&&i(),f&&f(),t.cancelToken&&t.cancelToken.unsubscribe(a),t.signal&&t.signal.removeEventListener("abort",a)}let e=new XMLHttpRequest;e.open(t.method.toUpperCase(),t.url,!0),e.timeout=t.timeout;function w(){if(!e)return;const n=v.default.from("getAllResponseHeaders"in e&&e.getAllResponseHeaders()),d={data:!u||u==="text"||u==="json"?e.responseText:e.response,status:e.status,statusText:e.statusText,headers:n,config:o,request:e};A.default(function(c){H(c),g()},function(c){s(c),g()},d),e=null}"onloadend"in e?e.onloadend=w:e.onreadystatechange=function(){!e||e.readyState!==4||e.status===0&&!(e.responseURL&&e.responseURL.indexOf("file:")===0)||setTimeout(w)},e.onabort=function(){e&&(s(new r.default("Request aborted",r.default.ECONNABORTED,o,e)),e=null)},e.onerror=function(){s(new r.default("Network Error",r.default.ERR_NETWORK,o,e)),e=null},e.ontimeout=function(){let l=t.timeout?"timeout of "+t.timeout+"ms exceeded":"timeout exceeded";const d=t.transitional||C.default;t.timeoutErrorMessage&&(l=t.timeoutErrorMessage),s(new r.default(l,d.clarifyTimeoutError?r.default.ETIMEDOUT:r.default.ECONNABORTED,o,e)),e=null},E===void 0&&T.setContentType(null),"setRequestHeader"in e&&b.default.forEach(T.toJSON(),function(l,d){e.setRequestHeader(d,l)}),b.default.isUndefined(t.withCredentials)||(e.withCredentials=!!t.withCredentials),u&&u!=="json"&&(e.responseType=t.responseType),m&&([h,f]=x.progressEventReducer(m,!0),e.addEventListener("progress",h)),R&&e.upload&&([q,i]=x.progressEventReducer(R),e.upload.addEventListener("progress",q),e.upload.addEventListener("loadend",i)),(t.cancelToken||t.signal)&&(a=n=>{e&&(s(!n||n.type?new L.default(null,o,e):n),e.abort(),e=null)},t.cancelToken&&t.cancelToken.subscribe(a),t.signal&&(t.signal.aborted?a():t.signal.addEventListener("abort",a)));const p=O.default(t.url);if(p&&D.default.protocols.indexOf(p)===-1){s(new r.default("Unsupported protocol "+p+":",r.default.ERR_BAD_REQUEST,o));return}e.send(E||null)})};exports.default=_;
//# sourceMappingURL=index.cjs152.js.map
