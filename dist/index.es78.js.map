{"version":3,"file":"index.es78.js","sources":["../node_modules/axios/lib/cancel/CancelToken.js"],"sourcesContent":["'use strict';\n\nimport CanceledError from './CanceledError.js';\n\n/**\n * A `CancelToken` is an object that can be used to request cancellation of an operation.\n *\n * @param {Function} executor The executor function.\n *\n * @returns {CancelToken}\n */\nclass CancelToken {\n  constructor(executor) {\n    if (typeof executor !== 'function') {\n      throw new TypeError('executor must be a function.');\n    }\n\n    let resolvePromise;\n\n    this.promise = new Promise(function promiseExecutor(resolve) {\n      resolvePromise = resolve;\n    });\n\n    const token = this;\n\n    // eslint-disable-next-line func-names\n    this.promise.then(cancel => {\n      if (!token._listeners) return;\n\n      let i = token._listeners.length;\n\n      while (i-- > 0) {\n        token._listeners[i](cancel);\n      }\n      token._listeners = null;\n    });\n\n    // eslint-disable-next-line func-names\n    this.promise.then = onfulfilled => {\n      let _resolve;\n      // eslint-disable-next-line func-names\n      const promise = new Promise(resolve => {\n        token.subscribe(resolve);\n        _resolve = resolve;\n      }).then(onfulfilled);\n\n      promise.cancel = function reject() {\n        token.unsubscribe(_resolve);\n      };\n\n      return promise;\n    };\n\n    executor(function cancel(message, config, request) {\n      if (token.reason) {\n        // Cancellation has already been requested\n        return;\n      }\n\n      token.reason = new CanceledError(message, config, request);\n      resolvePromise(token.reason);\n    });\n  }\n\n  /**\n   * Throws a `CanceledError` if cancellation has been requested.\n   */\n  throwIfRequested() {\n    if (this.reason) {\n      throw this.reason;\n    }\n  }\n\n  /**\n   * Subscribe to the cancel signal\n   */\n\n  subscribe(listener) {\n    if (this.reason) {\n      listener(this.reason);\n      return;\n    }\n\n    if (this._listeners) {\n      this._listeners.push(listener);\n    } else {\n      this._listeners = [listener];\n    }\n  }\n\n  /**\n   * Unsubscribe from the cancel signal\n   */\n\n  unsubscribe(listener) {\n    if (!this._listeners) {\n      return;\n    }\n    const index = this._listeners.indexOf(listener);\n    if (index !== -1) {\n      this._listeners.splice(index, 1);\n    }\n  }\n\n  toAbortSignal() {\n    const controller = new AbortController();\n\n    const abort = (err) => {\n      controller.abort(err);\n    };\n\n    this.subscribe(abort);\n\n    controller.signal.unsubscribe = () => this.unsubscribe(abort);\n\n    return controller.signal;\n  }\n\n  /**\n   * Returns an object that contains a new `CancelToken` and a function that, when called,\n   * cancels the `CancelToken`.\n   */\n  static source() {\n    let cancel;\n    const token = new CancelToken(function executor(c) {\n      cancel = c;\n    });\n    return {\n      token,\n      cancel\n    };\n  }\n}\n\nexport default CancelToken;\n"],"names":["CancelToken","executor","resolvePromise","resolve","token","cancel","i","onfulfilled","_resolve","promise","message","config","request","CanceledError","listener","index","controller","abort","err","c"],"mappings":";AAWA,MAAMA,EAAY;AAAA,EAChB,YAAYC,GAAU;AACpB,QAAI,OAAOA,KAAa;AACtB,YAAM,IAAI,UAAU,8BAA8B;AAGpD,QAAIC;AAEJ,SAAK,UAAU,IAAI,QAAQ,SAAyBC,GAAS;AAC3D,MAAAD,IAAiBC;AAAA,IACvB,CAAK;AAED,UAAMC,IAAQ;AAGd,SAAK,QAAQ,KAAK,CAAAC,MAAU;AAC1B,UAAI,CAACD,EAAM,WAAY;AAEvB,UAAIE,IAAIF,EAAM,WAAW;AAEzB,aAAOE,MAAM;AACX,QAAAF,EAAM,WAAWE,CAAC,EAAED,CAAM;AAE5B,MAAAD,EAAM,aAAa;AAAA,IACzB,CAAK,GAGD,KAAK,QAAQ,OAAO,CAAAG,MAAe;AACjC,UAAIC;AAEJ,YAAMC,IAAU,IAAI,QAAQ,CAAAN,MAAW;AACrC,QAAAC,EAAM,UAAUD,CAAO,GACvBK,IAAWL;AAAA,MACnB,CAAO,EAAE,KAAKI,CAAW;AAEnB,aAAAE,EAAQ,SAAS,WAAkB;AACjC,QAAAL,EAAM,YAAYI,CAAQ;AAAA,MAC3B,GAEMC;AAAA,IACR,GAEDR,EAAS,SAAgBS,GAASC,GAAQC,GAAS;AACjD,MAAIR,EAAM,WAKVA,EAAM,SAAS,IAAIS,EAAcH,GAASC,GAAQC,CAAO,GACzDV,EAAeE,EAAM,MAAM;AAAA,IACjC,CAAK;AAAA,EACL;AAAA;AAAA;AAAA;AAAA,EAKE,mBAAmB;AACjB,QAAI,KAAK;AACP,YAAM,KAAK;AAAA,EAEjB;AAAA;AAAA;AAAA;AAAA,EAME,UAAUU,GAAU;AAClB,QAAI,KAAK,QAAQ;AACf,MAAAA,EAAS,KAAK,MAAM;AACpB;AAAA,IACN;AAEI,IAAI,KAAK,aACP,KAAK,WAAW,KAAKA,CAAQ,IAE7B,KAAK,aAAa,CAACA,CAAQ;AAAA,EAEjC;AAAA;AAAA;AAAA;AAAA,EAME,YAAYA,GAAU;AACpB,QAAI,CAAC,KAAK;AACR;AAEF,UAAMC,IAAQ,KAAK,WAAW,QAAQD,CAAQ;AAC9C,IAAIC,MAAU,MACZ,KAAK,WAAW,OAAOA,GAAO,CAAC;AAAA,EAErC;AAAA,EAEE,gBAAgB;AACd,UAAMC,IAAa,IAAI,gBAAiB,GAElCC,IAAQ,CAACC,MAAQ;AACrB,MAAAF,EAAW,MAAME,CAAG;AAAA,IACrB;AAED,gBAAK,UAAUD,CAAK,GAEpBD,EAAW,OAAO,cAAc,MAAM,KAAK,YAAYC,CAAK,GAErDD,EAAW;AAAA,EACtB;AAAA;AAAA;AAAA;AAAA;AAAA,EAME,OAAO,SAAS;AACd,QAAIX;AAIJ,WAAO;AAAA,MACL,OAJY,IAAIL,EAAY,SAAkBmB,GAAG;AACjD,QAAAd,IAASc;AAAA,MACf,CAAK;AAAA,MAGC,QAAAd;AAAA,IACD;AAAA,EACL;AACA;","x_google_ignoreList":[0]}