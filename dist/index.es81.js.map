{"version":3,"file":"index.es81.js","sources":["../../node_modules/@apollo/client/utilities/caching/getMemoryInternals.js"],"sourcesContent":["import { __assign, __spreadArray } from \"tslib\";\nimport { cacheSizes } from \"./sizes.js\";\nvar globalCaches = {};\nexport function registerGlobalCache(name, getSize) {\n    globalCaches[name] = getSize;\n}\n/**\n * For internal purposes only - please call `ApolloClient.getMemoryInternals` instead\n * @internal\n */\nexport var getApolloClientMemoryInternals = globalThis.__DEV__ !== false ?\n    _getApolloClientMemoryInternals\n    : undefined;\n/**\n * For internal purposes only - please call `ApolloClient.getMemoryInternals` instead\n * @internal\n */\nexport var getInMemoryCacheMemoryInternals = globalThis.__DEV__ !== false ?\n    _getInMemoryCacheMemoryInternals\n    : undefined;\n/**\n * For internal purposes only - please call `ApolloClient.getMemoryInternals` instead\n * @internal\n */\nexport var getApolloCacheMemoryInternals = globalThis.__DEV__ !== false ?\n    _getApolloCacheMemoryInternals\n    : undefined;\nfunction getCurrentCacheSizes() {\n    // `defaultCacheSizes` is a `const enum` that will be inlined during build, so we have to reconstruct it's shape here\n    var defaults = {\n        parser: 1000 /* defaultCacheSizes[\"parser\"] */,\n        canonicalStringify: 1000 /* defaultCacheSizes[\"canonicalStringify\"] */,\n        print: 2000 /* defaultCacheSizes[\"print\"] */,\n        \"documentTransform.cache\": 2000 /* defaultCacheSizes[\"documentTransform.cache\"] */,\n        \"queryManager.getDocumentInfo\": 2000 /* defaultCacheSizes[\"queryManager.getDocumentInfo\"] */,\n        \"PersistedQueryLink.persistedQueryHashes\": 2000 /* defaultCacheSizes[\"PersistedQueryLink.persistedQueryHashes\"] */,\n        \"fragmentRegistry.transform\": 2000 /* defaultCacheSizes[\"fragmentRegistry.transform\"] */,\n        \"fragmentRegistry.lookup\": 1000 /* defaultCacheSizes[\"fragmentRegistry.lookup\"] */,\n        \"fragmentRegistry.findFragmentSpreads\": 4000 /* defaultCacheSizes[\"fragmentRegistry.findFragmentSpreads\"] */,\n        \"cache.fragmentQueryDocuments\": 1000 /* defaultCacheSizes[\"cache.fragmentQueryDocuments\"] */,\n        \"removeTypenameFromVariables.getVariableDefinitions\": 2000 /* defaultCacheSizes[\"removeTypenameFromVariables.getVariableDefinitions\"] */,\n        \"inMemoryCache.maybeBroadcastWatch\": 5000 /* defaultCacheSizes[\"inMemoryCache.maybeBroadcastWatch\"] */,\n        \"inMemoryCache.executeSelectionSet\": 50000 /* defaultCacheSizes[\"inMemoryCache.executeSelectionSet\"] */,\n        \"inMemoryCache.executeSubSelectedArray\": 10000 /* defaultCacheSizes[\"inMemoryCache.executeSubSelectedArray\"] */,\n    };\n    return Object.fromEntries(Object.entries(defaults).map(function (_a) {\n        var k = _a[0], v = _a[1];\n        return [\n            k,\n            cacheSizes[k] || v,\n        ];\n    }));\n}\nfunction _getApolloClientMemoryInternals() {\n    var _a, _b, _c, _d, _e;\n    if (!(globalThis.__DEV__ !== false))\n        throw new Error(\"only supported in development mode\");\n    return {\n        limits: getCurrentCacheSizes(),\n        sizes: __assign({ print: (_a = globalCaches.print) === null || _a === void 0 ? void 0 : _a.call(globalCaches), parser: (_b = globalCaches.parser) === null || _b === void 0 ? void 0 : _b.call(globalCaches), canonicalStringify: (_c = globalCaches.canonicalStringify) === null || _c === void 0 ? void 0 : _c.call(globalCaches), links: linkInfo(this.link), queryManager: {\n                getDocumentInfo: this[\"queryManager\"][\"transformCache\"].size,\n                documentTransforms: transformInfo(this[\"queryManager\"].documentTransform),\n            } }, (_e = (_d = this.cache).getMemoryInternals) === null || _e === void 0 ? void 0 : _e.call(_d)),\n    };\n}\nfunction _getApolloCacheMemoryInternals() {\n    return {\n        cache: {\n            fragmentQueryDocuments: getWrapperInformation(this[\"getFragmentDoc\"]),\n        },\n    };\n}\nfunction _getInMemoryCacheMemoryInternals() {\n    var fragments = this.config.fragments;\n    return __assign(__assign({}, _getApolloCacheMemoryInternals.apply(this)), { addTypenameDocumentTransform: transformInfo(this[\"addTypenameTransform\"]), inMemoryCache: {\n            executeSelectionSet: getWrapperInformation(this[\"storeReader\"][\"executeSelectionSet\"]),\n            executeSubSelectedArray: getWrapperInformation(this[\"storeReader\"][\"executeSubSelectedArray\"]),\n            maybeBroadcastWatch: getWrapperInformation(this[\"maybeBroadcastWatch\"]),\n        }, fragmentRegistry: {\n            findFragmentSpreads: getWrapperInformation(fragments === null || fragments === void 0 ? void 0 : fragments.findFragmentSpreads),\n            lookup: getWrapperInformation(fragments === null || fragments === void 0 ? void 0 : fragments.lookup),\n            transform: getWrapperInformation(fragments === null || fragments === void 0 ? void 0 : fragments.transform),\n        } });\n}\nfunction isWrapper(f) {\n    return !!f && \"dirtyKey\" in f;\n}\nfunction getWrapperInformation(f) {\n    return isWrapper(f) ? f.size : undefined;\n}\nfunction isDefined(value) {\n    return value != null;\n}\nfunction transformInfo(transform) {\n    return recurseTransformInfo(transform).map(function (cache) { return ({ cache: cache }); });\n}\nfunction recurseTransformInfo(transform) {\n    return transform ?\n        __spreadArray(__spreadArray([\n            getWrapperInformation(transform === null || transform === void 0 ? void 0 : transform[\"performWork\"])\n        ], recurseTransformInfo(transform === null || transform === void 0 ? void 0 : transform[\"left\"]), true), recurseTransformInfo(transform === null || transform === void 0 ? void 0 : transform[\"right\"]), true).filter(isDefined)\n        : [];\n}\nfunction linkInfo(link) {\n    var _a;\n    return link ?\n        __spreadArray(__spreadArray([\n            (_a = link === null || link === void 0 ? void 0 : link.getMemoryInternals) === null || _a === void 0 ? void 0 : _a.call(link)\n        ], linkInfo(link === null || link === void 0 ? void 0 : link.left), true), linkInfo(link === null || link === void 0 ? void 0 : link.right), true).filter(isDefined)\n        : [];\n}\n//# sourceMappingURL=getMemoryInternals.js.map"],"names":["globalCaches","registerGlobalCache","name","getSize","getApolloClientMemoryInternals","_getApolloClientMemoryInternals","getInMemoryCacheMemoryInternals","_getInMemoryCacheMemoryInternals","getApolloCacheMemoryInternals","_getApolloCacheMemoryInternals","getCurrentCacheSizes","defaults","_a","k","v","cacheSizes","_b","_c","_d","_e","__assign","linkInfo","transformInfo","getWrapperInformation","fragments","isWrapper","f","isDefined","value","transform","recurseTransformInfo","cache","__spreadArray","link"],"mappings":"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","x_google_ignoreList":[0]}